---
layout: post
title: PB -6- Arduino Servo kontrolü
---

Bilgisayarın bluetooth özelliğini kullanarak, Arduino'ya bağlı servo motoru döndürüyoruz. Arduino'ya program yükledikten sonra, kablonun diğer ucunu bilgisayardan çıkarıp, bir telefon şarj adaptörüne bağlayabilirsin.<br><br>

![image](https://github.com/user-attachments/assets/ca5a272b-9441-4e3b-ac48-5c81889dffec)<br><br>

Arduino'ya bilgi yollamak için HC-05 bluetooth modülünü kullanıyoruz. Önceki yazıda bu modülden biraz bahsetmiştim. Bu kez Arduino'nun RX'ini, HC-05 modülünün TX'ine bağlıyoruz. Bilgi akışı tek yönlü olacağından tek tel bağlamak yeterlidir. Böylece dirençlerle voltaj bölmeye gerek kalmıyor. Motorun istenen açıya dönmesi için bilgi akışı bu şekildedir :<br>
PureBasic (Bilgisayar) ➡️ Bluetooth (Hava) ➡️ HC-05 ➡️ Kablo ➡️ Arduino ➡️ Servo motor

Aşağıdaki kodu Arduino’ya yüklüyoruz.. Öncesinde, RX'e takılı olan kabloyu çıkaralım.

```c
#include <Servo.h>
Servo myservo;  
int pos = 0;    // servo position 0-180
void setup() {
  myservo.attach(9);  
  Serial.begin(19200);
}

void loop() {
  if(Serial.available()){
    pos = Serial.parseInt();
    myservo.write(pos); 
  }
  delay(20);
}
```

Bu kodu Arduino'ya yükledikten sonra, HC-05 modülünden gelen kabloyu Arduino'da RX pinine takabiliriz. Yine PB-5 DHT11 yazısındaki **comPort.pb** kodunu boş bir dizine kopyalayalım. Aşağıdaki kodu da, servo.pb olarak aynı dizine kaydet.

```pb

```

Program çalışınca farkettim ki motor istenen açıya gidiyor hemen ardından 0 dereceye geri dönüyor. Bu sorunun satır sonu karakterlerinden kaynaklandığını gördüm. InitComport() prosedüründe \EndOfText = "" değişkenini bu şekilde düzeltince sorun çözüldü. Motor döndüğü açıda kalıyor artık 🏍️ Bu arada HC-05 modülüne bluetooth (com port) üzerinden istenen baud ile bağlanılabiliyor. HC-05, baud'u otomatik olarak algılıyor.
<br><br>
