---
layout: post
title: PureBasic ile Arduino -4- Mesafe Ölçüm
---

Purebasic ile Arduino'ya bağlı HC-SR04 ultrasonik sensörden gelen bilgiyi yine seri port üzerinden okuyoruz fakat seri port için ayrı bir thread kullanarak..<br><br>

![image](https://github.com/user-attachments/assets/eb653f0c-5413-43b7-a9bd-20afbfa61c76)<br><br>

Aşağıdaki kodu Arduino’ya yüklüyoruz..<br><br>

```arduino
 const int trigPin = 5, echoPin = 6;
 long distance;
 long duration;
 void setup() {
   pinMode(trigPin, OUTPUT);
   pinMode(echoPin, INPUT);
   Serial.begin(19200);
 }
 void loop() {
 digitalWrite(trigPin, LOW);
   delayMicroseconds(5);
   digitalWrite(trigPin, HIGH);
   delayMicroseconds(10);
   digitalWrite(trigPin, LOW);
   duration = pulseIn(echoPin, HIGH); //microseconds
   distance = duration / 2 / 29.1; //cm
   if(distance > 200)
   distance = 200;
 Serial.println(distance);
   delay(100);
 }
```
<br>
Bu kodu Arduino'ya yükledikten sonra, her 100 milisaniyede bir mesafe bilgisi cm olarak seri port ile Purebasic'e iletilecektir. Arduino üzerindeki led'in yanıp sönme hızından aktarımın ne kadar hızlı olduğunu görebilirsin. Seri portu, thread ile kullanmak için github hesabımdaki [kodu](https://github.com/erolcum/PureBasic/tree/main/thread-03) kullanacağım. Böylece seri port işlerini halleden kısım thread olarak çalışacağından, ana programı meşgül etmeyecek..<br>
Aşağıdaki kodu, **comPort.pb** olarak belgelerim dizini altında yeni oluşturacağın bir dizine kaydedebilirsin. Kodu çalıştırırken "Use Option Threadsafe!" hatası alırsan Compiler ➡️ Compiler Options ➡️ Create threadsafe executable seçeneğini işaretlemen gerekir.

```pb


```
<br>


